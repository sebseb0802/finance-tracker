{% extends "finance/finance-base.html" %}

{% block title %}Expenses{% endblock %}

{% block header-title %}Expenses{% endblock %}

{% block finance_extra_css %}
    {% load static %}
    <link rel="stylesheet" href="{% static 'finance/expenses-style.css' %}">
{% endblock %}

{% block saved-label %}Saved expenses:{% endblock %}

{% block presence-check-and-list %}
    {% if expenses %}
        {% for i in expenses %}
            <li class="card">
                <div class="card-icon">
                    <svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 11V15M18 9V13M17 4C19.4487 4 20.7731 4.37476 21.4321 4.66544C21.5199 4.70415 21.5638 4.72351 21.6904 4.84437C21.7663 4.91682 21.9049 5.12939 21.9405 5.22809C22 5.39274 22 5.48274 22 5.66274V16.4111C22 17.3199 22 17.7743 21.8637 18.0079C21.7251 18.2454 21.5914 18.3559 21.3319 18.4472C21.0769 18.5369 20.562 18.438 19.5322 18.2401C18.8114 18.1017 17.9565 18 17 18C14 18 11 20 7 20C4.55129 20 3.22687 19.6252 2.56788 19.3346C2.48012 19.2958 2.43624 19.2765 2.3096 19.1556C2.23369 19.0832 2.09512 18.8706 2.05947 18.7719C2 18.6073 2 18.5173 2 18.3373L2 7.58885C2 6.68009 2 6.2257 2.13628 5.99214C2.2749 5.75456 2.40859 5.64412 2.66806 5.55281C2.92314 5.46305 3.43803 5.56198 4.46783 5.75985C5.18862 5.89834 6.04348 6 7 6C10 6 13 4 17 4ZM14.5 12C14.5 13.3807 13.3807 14.5 12 14.5C10.6193 14.5 9.5 13.3807 9.5 12C9.5 10.6193 10.6193 9.5 12 9.5C13.3807 9.5 14.5 10.6193 14.5 12Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                </div>
                <div class="card-info">
                    <div><strong>Value</strong></div><div>£{{ i.value }}</div> 
                    <div><strong>Category</strong></div><div>{{ i.category }}</div> 
                    <div><strong>Source</strong></div><div>{{ i.source }}</div>
                    <div><strong>Frequency</strong></div><div>{{ i.frequency }}</div>
                    <div><strong>Start date</strong></div><div>{{ i.startDate }}</div>
                    <div><strong>Date added</strong></div><div>{{ i.addDate }}</div>                           
                </div>
                <form action="{% url 'finance:deleteFinancialObject' %}" method="post" class="form" style="width:0;height:0;">
                    {% csrf_token %}
                    <input type="hidden" name="object_id" value="{{ i.id }}">
                    <input type="hidden" name="finance_type" value="expenses">
                    <input type="hidden" name="financial_object" value="{{ i }}">
                    <div class="delete-button">
                        <input type="submit" value="Delete">
                    </div>
                </form>
            </li>
        {% endfor %}
    {% else %}
        <li>No expenses added yet.</li>
    {% endif %}
{% endblock %}

{% block enter-label %}Enter new expense:{% endblock %}

{% block form %}
    {% if request.user.is_primary_user %}
        <form action="{% url 'finance:addExpense' %}" method="post" class="form">
            {% csrf_token %}
            <div class="form-components">
                <div class="form-labels-and-answers">
                    <div class="form-labels">
                        <label for="value"><strong>Value</strong>    £</label>

                        <label for="source"><strong>Source</strong></label>

                        <label for="category"><strong>Category</strong></label>

                        <div><strong>Frequency</strong></div>

                        <label for="startDate"><strong>Start date</strong></label>
                    </div>
                    <div class="form-answers">
                        <input type="text" id="value" name="value">

                        <input type="text" id="source" name="source">
                        
                        <select id="category" name="category">
                            <option value="Entertainment">Entertainment</option>
                            <option value="Eating out">Eating out</option>
                            <option value="Groceries">Groceries</option>
                            <option value="Travel">Travel</option>
                            <option value="Education">Education</option>
                            <option value="Clothing">Clothing</option>
                            <option value="Insurance">Insurance</option>
                            <option value="Healthcare">Healthcare</option>
                            <option value="Housing">Housing</option>
                            <option value="Debt">Debt</option>
                            <option value="Gifts">Gifts</option>
                        </select>

                        <select id="frequency" name="frequency">
                            <option value="One-off">One-off</option>
                            <option value="Monthly">Monthly</option>
                            <option value="Yearly">Yearly</option>
                        </select> 

                        <input type="date" id="startDate" name="startDate" value=date>
                    </div>
                </div>

                <div class="submit">
                    <input type="submit" value="Add expense">
                </div>
            </div>

        </form>
    {% else %}
            <p>Only primary users can perform this action.</p>
    {% endif %}
{% endblock %}